# CDF Toolkit Function Definitions
# The directory with the function code should have the same name
# and externalId as the function itself as defined below.

- name: 'dm:context:extract:assets:by:pattern'
  externalId: 'fn_dm_extract_assets_by_pattern'
  dataSetExternalId: 'ds_extract_assets_by_pattern'
  owner: 'Anonymous'
  description: 'Extract assets by pattern from CDF files using pattern-based diagram detection'
  metadata:
    version: '{{function_version}}'
  envVars:
    # The below two environment variables are set by the Toolkit
    ENV_TYPE: '${CDF_BUILD_TYPE}'
    CDF_ENV: '${CDF_ENVIRON}'
  # Number of cores, not available in Azure
  runtime: 'py311'
  functionPath: 'handler.py'
  # Data set id for the zip file with the code that is uploaded.

- name: 'dm:context:create:asset:hierarchy'
  externalId: 'fn_dm_create_asset_hierarchy'
  dataSetExternalId: 'ds_extract_assets_by_pattern'
  owner: 'Anonymous'
  description: 'Create asset hierarchy from locations and extracted tags'
  metadata:
    version: '{{function_version}}'
  envVars:
    # The below two environment variables are set by the Toolkit
    ENV_TYPE: '${CDF_BUILD_TYPE}'
    CDF_ENV: '${CDF_ENVIRON}'
  # Number of cores, not available in Azure
  runtime: 'py311'
  functionPath: 'handler.py'
  # Data set id for the zip file with the code that is uploaded.

- name: 'dm:context:write:asset:hierarchy'
  externalId: 'fn_dm_write_asset_hierarchy'
  dataSetExternalId: 'ds_extract_assets_by_pattern'
  owner: 'Anonymous'
  description: 'Write asset hierarchy to CDF data modeling'
  metadata:
    version: '{{function_version}}'
  envVars:
    # The below two environment variables are set by the Toolkit
    ENV_TYPE: '${CDF_BUILD_TYPE}'
    CDF_ENV: '${CDF_ENVIRON}'
  # Number of cores, not available in Azure
  runtime: 'py311'
  functionPath: 'handler.py'
  # Data set id for the zip file with the code that is uploaded.

- name: 'dm:context:create:annotations'
  externalId: 'fn_dm_create_annotations'
  dataSetExternalId: 'ds_file_annotation'
  owner: 'Anonymous'
  description: 'Create CogniteDiagramAnnotations from diagram detection results'
  metadata:
    version: '{{function_version}}'
  envVars:
    # The below two environment variables are set by the Toolkit
    ENV_TYPE: '${CDF_BUILD_TYPE}'
    CDF_ENV: '${CDF_ENVIRON}'
  # Number of cores, not available in Azure
  runtime: 'py311'
  functionPath: 'handler.py'
  # Data set id for the zip file with the code that is uploaded.

- name: 'dm:context:write:annotations'
  externalId: 'fn_dm_write_annotations'
  dataSetExternalId: 'ds_file_annotation'
  owner: 'Anonymous'
  description: 'Write CogniteDiagramAnnotations to CDF data modeling'
  metadata:
    version: '{{function_version}}'
  envVars:
    # The below two environment variables are set by the Toolkit
    ENV_TYPE: '${CDF_BUILD_TYPE}'
    CDF_ENV: '${CDF_ENVIRON}'
  # Number of cores, not available in Azure
  runtime: 'py311'
  functionPath: 'handler.py'
  # Data set id for the zip file with the code that is uploaded.
